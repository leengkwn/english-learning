<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“„ å¥å­æ‹¼åœ–éŠæˆ² | 400å–®å­—å­¸ç¿’</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans TC', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 1rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* æ¨™é¡Œ */
        .header {
            text-align: center;
            color: white;
            margin-bottom: 2rem;
            animation: fadeIn 0.6s ease-out;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        /* é›£åº¦é¸æ“‡ */
        .difficulty-selector {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            animation: slideUp 0.6s ease-out;
        }

        .difficulty-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1rem;
            text-align: center;
        }

        .difficulty-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-width: 500px;
            margin: 0 auto;
        }

        .difficulty-btn {
            padding: 1.5rem 2rem;
            font-size: 1.2rem;
            font-weight: 600;
            border: 3px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            text-align: left;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .difficulty-btn span {
            font-size: 1.3rem;
            font-weight: 700;
        }

        .difficulty-btn small {
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 500;
        }

        .difficulty-btn.easy {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .difficulty-btn.medium {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
        }

        .difficulty-btn.hard {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .difficulty-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.3);
        }

        .difficulty-btn.selected {
            border-color: #1f2937;
            box-shadow: 0 0 0 3px rgba(31, 41, 55, 0.3);
        }

        /* éŠæˆ²å¡ç‰‡ */
        .game-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            animation: slideUp 0.6s ease-out;
            display: none;
        }

        .game-card.active {
            display: block;
        }

        /* é¡Œç›®è³‡è¨Š */
        .question-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e5e7eb;
        }

        .question-number {
            font-size: 1.2rem;
            font-weight: 600;
            color: #4b5563;
        }

        .score {
            font-size: 1.2rem;
            font-weight: 600;
            color: #10b981;
        }

        .difficulty-badge {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .difficulty-badge.easy {
            background: #d1fae5;
            color: #065f46;
        }

        .difficulty-badge.medium {
            background: #fef3c7;
            color: #92400e;
        }

        .difficulty-badge.hard {
            background: #fee2e2;
            color: #991b1b;
        }

        /* æç¤ºå€ */
        .hint-area {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 3px dashed #f59e0b;
        }

        .hint-label {
            font-size: 0.9rem;
            color: #92400e;
            margin-bottom: 0.75rem;
            font-weight: 500;
        }

        .chinese-sentence {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.75rem;
            text-align: center;
        }

        .english-hint {
            font-size: 1rem;
            color: #9ca3af;
            font-style: italic;
        }

        /* ç­”æ¡ˆå€ */
        .answer-area {
            min-height: 100px;
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 3px dashed #f59e0b;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            align-items: center;
        }

        .answer-placeholder {
            color: #d97706;
            font-size: 1.1rem;
            width: 100%;
            text-align: center;
            user-select: none;
        }

        /* å–®å­—åº« */
        .words-pool {
            background: #e0e7ff;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            min-height: 80px;
            justify-content: center;
        }

        /* å–®å­—å¡ç‰‡ */
        .word-card {
            background: white;
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: move;
            user-select: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .word-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            border-color: #667eea;
        }

        .word-card.dragging {
            opacity: 0.5;
            cursor: grabbing;
        }

        .word-card.in-answer {
            background: #dbeafe;
            border-color: #3b82f6;
        }

        /* æŒ‰éˆ•å€ */
        .button-group {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 1rem;
        }

        button {
            padding: 0.75rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .check-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .clear-btn {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
            color: white;
        }

        .clear-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(107, 114, 128, 0.3);
        }

        .next-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            display: none;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .back-btn {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
        }

        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }

        /* å›é¥‹è¨Šæ¯ */
        .feedback {
            padding: 1rem;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
            display: none;
            animation: bounceIn 0.5s ease-out;
        }

        .feedback.correct {
            background: #d1fae5;
            color: #065f46;
            border: 2px solid #10b981;
        }

        .feedback.wrong {
            background: #fee2e2;
            color: #991b1b;
            border: 2px solid #ef4444;
        }

        /* å®Œæˆç•«é¢ */
        .completion {
            display: none;
            text-align: center;
            padding: 3rem 2rem;
            animation: bounceIn 0.8s ease-out;
        }

        .completion h2 {
            font-size: 2.5rem;
            color: #1f2937;
            margin-bottom: 1rem;
        }

        .completion .score-display {
            font-size: 3rem;
            font-weight: 700;
            color: #10b981;
            margin: 1.5rem 0;
        }

        .completion .message {
            font-size: 1.3rem;
            color: #6b7280;
            margin-bottom: 2rem;
        }

        .restart-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            font-size: 1.3rem;
            padding: 1rem 3rem;
        }

        .restart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
        }

        /* å‹•ç•« */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .chinese-sentence {
                font-size: 1.5rem;
            }

            .word-card {
                padding: 0.6rem 1.2rem;
                font-size: 1.1rem;
            }

            button {
                padding: 0.6rem 1.5rem;
                font-size: 1rem;
            }

            .completion h2 {
                font-size: 2rem;
            }

            .completion .score-display {
                font-size: 2.5rem;
            }

            .difficulty-btn {
                padding: 1.2rem 1.5rem;
            }

            .difficulty-btn span {
                font-size: 1.1rem;
            }

            .difficulty-btn small {
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- æ¨™é¡Œ -->
        <div class="header">
            <h1>ğŸ“„ å¥å­æ‹¼åœ–éŠæˆ²</h1>
            <p>æ‹–æ›³æˆ–é»æ“Šå–®å­—,æ’åˆ—æˆæ­£ç¢ºçš„è‹±æ–‡å¥å­!</p>
        </div>

        <!-- é›£åº¦é¸æ“‡ -->
        <div class="difficulty-selector" id="difficultySelector">
            <div class="difficulty-title">ğŸ¯ é¸æ“‡é›£åº¦ç­‰ç´š</div>
            <div class="difficulty-buttons">
                <button class="difficulty-btn easy" onclick="selectDifficulty('easy')">
                    <span>ğŸ˜Š ç°¡å–®</span>
                    <small>50-100å–®å­—</small>
                </button>
                <button class="difficulty-btn medium" onclick="selectDifficulty('medium')">
                    <span>ğŸ¤” ä¸­ç­‰</span>
                    <small>100-250å–®å­—</small>
                </button>
                <button class="difficulty-btn hard" onclick="selectDifficulty('hard')">
                    <span>ğŸ˜¤ å›°é›£</span>
                    <small>250-400å–®å­—</small>
                </button>
            </div>
        </div>

        <!-- éŠæˆ²å¡ç‰‡ -->
        <div class="game-card" id="gameCard">
            <!-- é¡Œç›®è³‡è¨Š -->
            <div class="question-info">
                <div class="question-number" id="questionNumber">ç¬¬ 1 é¡Œ / å…± 10 é¡Œ</div>
                <div class="difficulty-badge" id="difficultyBadge">ğŸ˜Š ç°¡å–®</div>
                <div class="score" id="score">âœ… 0 / 10</div>
            </div>

            <!-- æç¤ºå€ -->
            <div class="hint-area">
                <div class="hint-label">ğŸ“Œ è«‹å°‡ä¸‹é¢çš„å–®å­—æ’åˆ—æˆé€™å€‹ä¸­æ–‡çš„è‹±æ–‡å¥å­:</div>
                <div class="chinese-sentence" id="chineseSentence">æˆ‘å–œæ­¡ç‹—ã€‚</div>
                <div class="english-hint" id="englishHint">ğŸ’¡ æç¤º: ä¸»è© + å‹•è© + å—è©</div>
            </div>

            <!-- ç­”æ¡ˆå€ -->
            <div class="answer-area" id="answerArea" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="answer-placeholder" id="placeholder">ğŸ“‹ å°‡å–®å­—æ‹–æ›³åˆ°é€™è£¡æ’åˆ—å¥å­</div>
            </div>

            <!-- å–®å­—åº« -->
            <div class="words-pool" id="wordsPool">
                ğŸ´ å¯ç”¨å–®å­—:
            </div>

            <!-- æŒ‰éˆ• -->
            <div class="button-group">
                <button class="back-btn" onclick="backToDifficulty()" id="backBtn">
                    â† è¿”å›é¸æ“‡
                </button>
                <button class="clear-btn" onclick="clearAnswer()" id="clearBtn">
                    ğŸ”„ æ¸…ç©º
                </button>
                <button class="check-btn" onclick="checkAnswer()" id="checkBtn">
                    âœ“ æª¢æŸ¥ç­”æ¡ˆ
                </button>
                <button class="next-btn" onclick="nextQuestion()" id="nextBtn">
                    â†’ ä¸‹ä¸€é¡Œ
                </button>
            </div>

            <!-- å›é¥‹ -->
            <div class="feedback" id="feedback"></div>
        </div>

        <!-- å®Œæˆç•«é¢ -->
        <div class="completion" id="completion">
            <h2>ğŸ‰ æ­å–œå®Œæˆ!</h2>
            <div class="score-display" id="finalScore">10 / 10</div>
            <div class="message" id="completionMessage">å¤ªæ£’äº†!ä½ å…¨éƒ¨ç­”å°!</div>
            <div class="button-group">
                <button class="restart-btn" onclick="playAgain()">
                    ğŸ® å†ç©ä¸€æ¬¡
                </button>
                <button class="back-btn" onclick="backToHome()">
                    ğŸ  å›é¦–é 
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==================== èªéŸ³ç³»çµ± ====================
        function speakSentence(text) {
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
            }
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.85;
            utterance.pitch = 1.0;
            utterance.volume = 1.0;
            
            window.speechSynthesis.speak(utterance);
        }

        // ==================== é¡Œç›®è³‡æ–™åº« ====================
        const questionsByDifficulty = {
            // ğŸ˜Š ç°¡å–® (50-100å–®å­—) - åŸºç¤å¥å‹
            easy: [
                {
                    chinese: "æˆ‘æ˜¯å­¸ç”Ÿã€‚",
                    english: "I am a student.",
                    words: ["I", "am", "a", "student", "."],
                    hint: "ä¸»è© + beå‹•è© + å† è© + åè©"
                },
                {
                    chinese: "ä»–å–œæ­¡ç‹—ã€‚",
                    english: "He likes dogs.",
                    words: ["He", "likes", "dogs", "."],
                    hint: "ä¸»è© + å‹•è© + åè©"
                },
                {
                    chinese: "å¥¹æ˜¯è€å¸«ã€‚",
                    english: "She is a teacher.",
                    words: ["She", "is", "a", "teacher", "."],
                    hint: "ä¸»è© + beå‹•è© + å† è© + åè©"
                },
                {
                    chinese: "é€™æ˜¯æ›¸ã€‚",
                    english: "This is a book.",
                    words: ["This", "is", "a", "book", "."],
                    hint: "æŒ‡ç¤ºä»£åè© + beå‹•è© + å† è© + åè©"
                },
                {
                    chinese: "æˆ‘æœ‰è²“ã€‚",
                    english: "I have a cat.",
                    words: ["I", "have", "a", "cat", "."],
                    hint: "ä¸»è© + å‹•è© + å† è© + åè©"
                },
                {
                    chinese: "ä½ å¥½å—?",
                    english: "How are you?",
                    words: ["How", "are", "you", "?"],
                    hint: "ç–‘å•è© + beå‹•è© + ä¸»è©"
                },
                {
                    chinese: "ä»–æ˜¯ç”·å­©ã€‚",
                    english: "He is a boy.",
                    words: ["He", "is", "a", "boy", "."],
                    hint: "ä¸»è© + beå‹•è© + å† è© + åè©"
                },
                {
                    chinese: "å¥¹æ˜¯å¥³å­©ã€‚",
                    english: "She is a girl.",
                    words: ["She", "is", "a", "girl", "."],
                    hint: "ä¸»è© + beå‹•è© + å† è© + åè©"
                },
                {
                    chinese: "æˆ‘çœ‹æ›¸ã€‚",
                    english: "I read books.",
                    words: ["I", "read", "books", "."],
                    hint: "ä¸»è© + å‹•è© + åè©"
                },
                {
                    chinese: "ä»–å¯«å­—ã€‚",
                    english: "He writes.",
                    words: ["He", "writes", "."],
                    hint: "ä¸»è© + å‹•è©"
                },
                {
                    chinese: "å¥¹å”±æ­Œã€‚",
                    english: "She sings.",
                    words: ["She", "sings", "."],
                    hint: "ä¸»è© + å‹•è©"
                },
                {
                    chinese: "é€™æ˜¯ä»€éº¼?",
                    english: "What is this?",
                    words: ["What", "is", "this", "?"],
                    hint: "ç–‘å•è© + beå‹•è© + æŒ‡ç¤ºä»£åè©"
                },
                {
                    chinese: "æˆ‘å–œæ­¡ä½ ã€‚",
                    english: "I like you.",
                    words: ["I", "like", "you", "."],
                    hint: "ä¸»è© + å‹•è© + å—è©"
                },
                {
                    chinese: "ä»–æ˜¯å¥½äººã€‚",
                    english: "He is nice.",
                    words: ["He", "is", "nice", "."],
                    hint: "ä¸»è© + beå‹•è© + å½¢å®¹è©"
                },
                {
                    chinese: "æˆ‘å€‘æ˜¯æœ‹å‹ã€‚",
                    english: "We are friends.",
                    words: ["We", "are", "friends", "."],
                    hint: "ä¸»è© + beå‹•è© + åè©"
                },
                {
                    chinese: "é‚£æ˜¯èª°?",
                    english: "Who is that?",
                    words: ["Who", "is", "that", "?"],
                    hint: "ç–‘å•è© + beå‹•è© + æŒ‡ç¤ºä»£åè©"
                },
                {
                    chinese: "æˆ‘æœ‰ä¸€å€‹å“¥å“¥ã€‚",
                    english: "I have a brother.",
                    words: ["I", "have", "a", "brother", "."],
                    hint: "ä¸»è© + å‹•è© + å† è© + åè©"
                },
                {
                    chinese: "å¥¹æœ‰ä¸€å€‹å§Šå§Šã€‚",
                    english: "She has a sister.",
                    words: ["She", "has", "a", "sister", "."],
                    hint: "ä¸»è© + å‹•è© + å† è© + åè©"
                },
                {
                    chinese: "æˆ‘æ„›ä½ ã€‚",
                    english: "I love you.",
                    words: ["I", "love", "you", "."],
                    hint: "ä¸»è© + å‹•è© + å—è©"
                },
                {
                    chinese: "ä»–å€‘æ˜¯å­¸ç”Ÿã€‚",
                    english: "They are students.",
                    words: ["They", "are", "students", "."],
                    hint: "ä¸»è© + beå‹•è© + åè©"
                }
            ],

            // ğŸ¤” ä¸­ç­‰ (100-250å–®å­—) - é€²éšå¥å‹
            medium: [
                {
                    chinese: "æˆ‘æ¯å¤©ä¸Šå­¸ã€‚",
                    english: "I go to school every day.",
                    words: ["I", "go", "to", "school", "every", "day", "."],
                    hint: "ä¸»è© + å‹•è© + ä»‹ç³»è© + åœ°é» + é »ç‡"
                },
                {
                    chinese: "å¥¹æ­£åœ¨çœ‹æ›¸ã€‚",
                    english: "She is reading a book.",
                    words: ["She", "is", "reading", "a", "book", "."],
                    hint: "ä¸»è© + beå‹•è© + ç¾åœ¨åˆ†è© + å—è©"
                },
                {
                    chinese: "ä»–å€‘åœ¨å…¬åœ’ç©ã€‚",
                    english: "They play in the park.",
                    words: ["They", "play", "in", "the", "park", "."],
                    hint: "ä¸»è© + å‹•è© + ä»‹ç³»è© + åœ°é»"
                },
                {
                    chinese: "æˆ‘æœƒèªªè‹±æ–‡ã€‚",
                    english: "I can speak English.",
                    words: ["I", "can", "speak", "English", "."],
                    hint: "ä¸»è© + åŠ©å‹•è© + å‹•è© + å—è©"
                },
                {
                    chinese: "å¥¹å–œæ­¡å”±æ­Œã€‚",
                    english: "She likes singing.",
                    words: ["She", "likes", "singing", "."],
                    hint: "ä¸»è© + å‹•è© + å‹•åè©"
                },
                {
                    chinese: "æˆ‘æ˜¨å¤©çœ‹é›»å½±ã€‚",
                    english: "I watched a movie yesterday.",
                    words: ["I", "watched", "a", "movie", "yesterday", "."],
                    hint: "ä¸»è© + éå»å¼å‹•è© + å—è© + æ™‚é–“"
                },
                {
                    chinese: "ä»–æœ‰å…©å€‹å§Šå§Šã€‚",
                    english: "He has two sisters.",
                    words: ["He", "has", "two", "sisters", "."],
                    hint: "ä¸»è© + å‹•è© + æ•¸é‡ + åè©"
                },
                {
                    chinese: "æˆ‘å€‘åœ¨å®¶åƒæ™šé¤ã€‚",
                    english: "We eat dinner at home.",
                    words: ["We", "eat", "dinner", "at", "home", "."],
                    hint: "ä¸»è© + å‹•è© + å—è© + ä»‹ç³»è© + åœ°é»"
                },
                {
                    chinese: "å¥¹åœ¨æ•™å®¤è£¡ã€‚",
                    english: "She is in the classroom.",
                    words: ["She", "is", "in", "the", "classroom", "."],
                    hint: "ä¸»è© + beå‹•è© + ä»‹ç³»è© + åœ°é»"
                },
                {
                    chinese: "ä½ å–œæ­¡ä»€éº¼é‹å‹•?",
                    english: "What sport do you like?",
                    words: ["What", "sport", "do", "you", "like", "?"],
                    hint: "ç–‘å•è© + åè© + åŠ©å‹•è© + ä¸»è© + å‹•è©"
                },
                {
                    chinese: "æˆ‘çš„åª½åª½å¾ˆæ¼‚äº®ã€‚",
                    english: "My mother is beautiful.",
                    words: ["My", "mother", "is", "beautiful", "."],
                    hint: "æ‰€æœ‰æ ¼ + åè© + beå‹•è© + å½¢å®¹è©"
                },
                {
                    chinese: "ä»–å€‘æ­£åœ¨åƒåˆé¤ã€‚",
                    english: "They are eating lunch.",
                    words: ["They", "are", "eating", "lunch", "."],
                    hint: "ä¸»è© + beå‹•è© + ç¾åœ¨åˆ†è© + å—è©"
                },
                {
                    chinese: "æˆ‘æƒ³è¦ä¸€æ¯æ°´ã€‚",
                    english: "I want a glass of water.",
                    words: ["I", "want", "a", "glass", "of", "water", "."],
                    hint: "ä¸»è© + å‹•è© + æ•¸é‡è©çµ„"
                },
                {
                    chinese: "å¥¹æ¯å¤©åšä½œæ¥­ã€‚",
                    english: "She does homework every day.",
                    words: ["She", "does", "homework", "every", "day", "."],
                    hint: "ä¸»è© + å‹•è© + å—è© + é »ç‡"
                },
                {
                    chinese: "æˆ‘å€‘å–œæ­¡è¸¢è¶³çƒã€‚",
                    english: "We like playing soccer.",
                    words: ["We", "like", "playing", "soccer", "."],
                    hint: "ä¸»è© + å‹•è© + å‹•åè© + å—è©"
                },
                {
                    chinese: "ä»–åœ¨åœ–æ›¸é¤¨è®€æ›¸ã€‚",
                    english: "He studies in the library.",
                    words: ["He", "studies", "in", "the", "library", "."],
                    hint: "ä¸»è© + å‹•è© + ä»‹ç³»è© + åœ°é»"
                },
                {
                    chinese: "ä»Šå¤©å¤©æ°£å¾ˆå¥½ã€‚",
                    english: "The weather is nice today.",
                    words: ["The", "weather", "is", "nice", "today", "."],
                    hint: "å† è© + åè© + beå‹•è© + å½¢å®¹è© + æ™‚é–“"
                },
                {
                    chinese: "å¥¹éœ€è¦å¹«å¿™ã€‚",
                    english: "She needs help.",
                    words: ["She", "needs", "help", "."],
                    hint: "ä¸»è© + å‹•è© + å—è©"
                },
                {
                    chinese: "æˆ‘å€‘æœ‰å¾ˆå¤šæœ‹å‹ã€‚",
                    english: "We have many friends.",
                    words: ["We", "have", "many", "friends", "."],
                    hint: "ä¸»è© + å‹•è© + æ•¸é‡ + åè©"
                },
                {
                    chinese: "ä»–æœƒæ¸¸æ³³ã€‚",
                    english: "He can swim.",
                    words: ["He", "can", "swim", "."],
                    hint: "ä¸»è© + åŠ©å‹•è© + å‹•è©"
                }
            ],

            // ğŸ˜¤ å›°é›£ (250-400å–®å­—) - è¤‡é›œå¥å‹
            hard: [
                {
                    chinese: "æˆ‘æ˜¨å¤©åœ¨å…¬åœ’é‡è¦‹æˆ‘çš„è€å¸«ã€‚",
                    english: "I met my teacher in the park yesterday.",
                    words: ["I", "met", "my", "teacher", "in", "the", "park", "yesterday", "."],
                    hint: "ä¸»è© + éå»å¼å‹•è© + æ‰€æœ‰æ ¼ + åè© + ä»‹ç³»è© + åœ°é» + æ™‚é–“"
                },
                {
                    chinese: "å¥¹æ­£åœ¨ç­‰å…¬è»Šå»å­¸æ ¡ã€‚",
                    english: "She is waiting for the bus to school.",
                    words: ["She", "is", "waiting", "for", "the", "bus", "to", "school", "."],
                    hint: "ä¸»è© + beå‹•è© + ç¾åœ¨åˆ†è© + ä»‹ç³»è© + å—è© + ç›®çš„"
                },
                {
                    chinese: "æˆ‘å€‘æ˜å¤©è¦å»åšç‰©é¤¨åƒè§€ã€‚",
                    english: "We will visit the museum tomorrow.",
                    words: ["We", "will", "visit", "the", "museum", "tomorrow", "."],
                    hint: "ä¸»è© + æœªä¾†å¼åŠ©å‹•è© + å‹•è© + å—è© + æ™‚é–“"
                },
                {
                    chinese: "ä»–æ¯”æˆ‘é«˜ã€‚",
                    english: "He is taller than me.",
                    words: ["He", "is", "taller", "than", "me", "."],
                    hint: "ä¸»è© + beå‹•è© + æ¯”è¼ƒç´šå½¢å®¹è© + than + å—è©"
                },
                {
                    chinese: "å¥¹æƒ³æˆç‚ºä¸€åé†«ç”Ÿã€‚",
                    english: "She wants to be a doctor.",
                    words: ["She", "wants", "to", "be", "a", "doctor", "."],
                    hint: "ä¸»è© + å‹•è© + toä¸å®šè© + åè©"
                },
                {
                    chinese: "æˆ‘å€‘æ‡‰è©²ä¿è­·ç’°å¢ƒã€‚",
                    english: "We should protect the environment.",
                    words: ["We", "should", "protect", "the", "environment", "."],
                    hint: "ä¸»è© + åŠ©å‹•è© + å‹•è© + å—è©"
                },
                {
                    chinese: "é€™æ˜¯æˆ‘è¦‹éæœ€ç¾çš„åœ°æ–¹ã€‚",
                    english: "This is the most beautiful place I have seen.",
                    words: ["This", "is", "the", "most", "beautiful", "place", "I", "have", "seen", "."],
                    hint: "ä¸»è© + beå‹•è© + æœ€é«˜ç´š + é—œä¿‚å­å¥"
                },
                {
                    chinese: "ä»–æ­£åœ¨å¹«åª½åª½åšå®¶äº‹ã€‚",
                    english: "He is helping his mother do housework.",
                    words: ["He", "is", "helping", "his", "mother", "do", "housework", "."],
                    hint: "ä¸»è© + beå‹•è© + ç¾åœ¨åˆ†è© + å—è© + åŸå½¢å‹•è© + å—è©"
                },
                {
                    chinese: "å¦‚æœæ˜å¤©ä¸‹é›¨,æˆ‘å€‘å°±å¾…åœ¨å®¶ã€‚",
                    english: "If it rains tomorrow, we will stay home.",
                    words: ["If", "it", "rains", "tomorrow", ",", "we", "will", "stay", "home", "."],
                    hint: "Ifæ¢ä»¶å¥ + ä¸»è¦å­å¥"
                },
                {
                    chinese: "å¥¹ä¸åƒ…è°æ˜è€Œä¸”åŠªåŠ›ã€‚",
                    english: "She is not only smart but also hard-working.",
                    words: ["She", "is", "not", "only", "smart", "but", "also", "hard-working", "."],
                    hint: "ä¸»è© + beå‹•è© + not only...but also å¥å‹"
                },
                {
                    chinese: "æˆ‘å·²ç¶“å®Œæˆä½œæ¥­äº†ã€‚",
                    english: "I have already finished my homework.",
                    words: ["I", "have", "already", "finished", "my", "homework", "."],
                    hint: "ä¸»è© + å®Œæˆå¼åŠ©å‹•è© + å‰¯è© + éå»åˆ†è© + å—è©"
                },
                {
                    chinese: "ä»–å€‘æ­£åœ¨è¨è«–ä¸‹é€±çš„è¨ˆç•«ã€‚",
                    english: "They are discussing the plan for next week.",
                    words: ["They", "are", "discussing", "the", "plan", "for", "next", "week", "."],
                    hint: "ä¸»è© + beå‹•è© + ç¾åœ¨åˆ†è© + å—è© + ä»‹ç³»è©ç‰‡èª"
                },
                {
                    chinese: "å­¸ç¿’è‹±æ–‡éœ€è¦æ™‚é–“å’Œè€å¿ƒã€‚",
                    english: "Learning English takes time and patience.",
                    words: ["Learning", "English", "takes", "time", "and", "patience", "."],
                    hint: "å‹•åè©ä¸»è© + å‹•è© + å—è© + å°ç­‰é€£æ¥è©"
                },
                {
                    chinese: "è¶Šä¾†è¶Šå¤šäººé—œå¿ƒç’°ä¿è­°é¡Œã€‚",
                    english: "More and more people care about environmental issues.",
                    words: ["More", "and", "more", "people", "care", "about", "environmental", "issues", "."],
                    hint: "æ¯”è¼ƒç´šç–Šç”¨ + ä¸»è© + å‹•è© + ä»‹ç³»è© + å—è©"
                },
                {
                    chinese: "æˆ‘å¸Œæœ›ä½ èƒ½å¹«æˆ‘ã€‚",
                    english: "I hope you can help me.",
                    words: ["I", "hope", "you", "can", "help", "me", "."],
                    hint: "ä¸»è© + å‹•è© + åè©å­å¥"
                },
                {
                    chinese: "é‚£å€‹ç©¿ç´…è¡£æœçš„å¥³å­©æ˜¯æˆ‘å¦¹å¦¹ã€‚",
                    english: "The girl in red is my sister.",
                    words: ["The", "girl", "in", "red", "is", "my", "sister", "."],
                    hint: "å† è© + åè© + ä»‹ç³»è©ç‰‡èª + beå‹•è© + æ‰€æœ‰æ ¼ + åè©"
                },
                {
                    chinese: "ä»–èŠ±äº†ä¸‰å°æ™‚å®Œæˆé€™é …å·¥ä½œã€‚",
                    english: "He spent three hours finishing this work.",
                    words: ["He", "spent", "three", "hours", "finishing", "this", "work", "."],
                    hint: "ä¸»è© + éå»å¼å‹•è© + æ™‚é–“ + å‹•åè© + å—è©"
                },
                {
                    chinese: "å„˜ç®¡å¾ˆç´¯,å¥¹é‚„æ˜¯ç¹¼çºŒå·¥ä½œã€‚",
                    english: "Although tired, she continued working.",
                    words: ["Although", "tired", ",", "she", "continued", "working", "."],
                    hint: "é€£æ¥è© + å½¢å®¹è© + ä¸»è© + å‹•è© + å‹•åè©"
                },
                {
                    chinese: "é€™æœ¬æ›¸å€¼å¾—ä¸€è®€ã€‚",
                    english: "This book is worth reading.",
                    words: ["This", "book", "is", "worth", "reading", "."],
                    hint: "ä¸»è© + beå‹•è© + worth + å‹•åè©"
                },
                {
                    chinese: "æˆ‘å€‘æ‡‰è©²äº’ç›¸å°Šé‡ã€‚",
                    english: "We should respect each other.",
                    words: ["We", "should", "respect", "each", "other", "."],
                    hint: "ä¸»è© + åŠ©å‹•è© + å‹•è© + ä»£åè©"
                }
            ]
        };

        // ==================== éŠæˆ²ç‹€æ…‹ ====================
        let currentDifficulty = null;
        let questions = [];
        let currentQuestion = 0;
        let score = 0;
        let draggedElement = null;

        // ==================== é¸æ“‡é›£åº¦ ====================
        function selectDifficulty(difficulty) {
            currentDifficulty = difficulty;
            
            // éš¨æ©ŸæŠ½10é¡Œ
            const allQuestions = questionsByDifficulty[difficulty];
            const shuffled = [...allQuestions].sort(() => Math.random() - 0.5);
            questions = shuffled.slice(0, 10);
            
            // é‡ç½®éŠæˆ²ç‹€æ…‹
            currentQuestion = 0;
            score = 0;
            
            // æ›´æ–°é›£åº¦é¡¯ç¤º
            const badge = document.getElementById('difficultyBadge');
            badge.className = 'difficulty-badge ' + difficulty;
            if (difficulty === 'easy') {
                badge.textContent = 'ğŸ˜Š ç°¡å–®';
            } else if (difficulty === 'medium') {
                badge.textContent = 'ğŸ¤” ä¸­ç­‰';
            } else {
                badge.textContent = 'ğŸ˜¤ å›°é›£';
            }
            
            // åˆ‡æ›ç•«é¢
            document.getElementById('difficultySelector').style.display = 'none';
            document.getElementById('completion').style.display = 'none';
            const gameCard = document.getElementById('gameCard');
            gameCard.classList.add('active');
            gameCard.style.display = 'block';
            
            // è¼‰å…¥ç¬¬ä¸€é¡Œ
            loadQuestion();
        }

        // ==================== è¿”å›é›£åº¦é¸æ“‡ ====================
        function backToDifficulty() {
            // å®Œæ•´æ¸…é™¤éŠæˆ²å¡ç‰‡ç‹€æ…‹
            const gameCard = document.getElementById('gameCard');
            gameCard.classList.remove('active');
            gameCard.style.display = 'none';
            
            // é¡¯ç¤ºé›£åº¦é¸æ“‡
            document.getElementById('difficultySelector').style.display = 'block';
        }

        // ==================== è¼‰å…¥é¡Œç›® ====================
        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                showCompletion();
                return;
            }

            const q = questions[currentQuestion];
            
            // æ›´æ–°é¡Œç›®è³‡è¨Š
            document.getElementById('questionNumber').textContent = 
                `ç¬¬ ${currentQuestion + 1} é¡Œ / å…± ${questions.length} é¡Œ`;
            document.getElementById('chineseSentence').textContent = q.chinese;
            document.getElementById('englishHint').textContent = `ğŸ’¡ æç¤º: ${q.hint}`;
            
            // æ¸…ç©ºç­”æ¡ˆå€
            const answerArea = document.getElementById('answerArea');
            answerArea.innerHTML = '<div class="answer-placeholder" id="placeholder">ğŸ“‹ å°‡å–®å­—æ‹–æ›³åˆ°é€™è£¡æ’åˆ—å¥å­</div>';
            
            // éš¨æ©Ÿæ‰“äº‚å–®å­—é †åº
            const shuffledWords = [...q.words].sort(() => Math.random() - 0.5);
            
            // å‰µå»ºå–®å­—å¡ç‰‡
            const wordsPool = document.getElementById('wordsPool');
            wordsPool.innerHTML = 'ğŸ´ å¯ç”¨å–®å­—:';
            shuffledWords.forEach(word => {
                const card = createWordCard(word);
                wordsPool.appendChild(card);
            });
            
            // é‡ç½®æŒ‰éˆ•ç‹€æ…‹
            document.getElementById('checkBtn').style.display = 'inline-flex';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('feedback').style.display = 'none';
        }

        // ==================== å‰µå»ºå–®å­—å¡ç‰‡ ====================
        function createWordCard(word) {
            const card = document.createElement('div');
            card.className = 'word-card';
            card.textContent = word;
            card.draggable = true;
            
            card.addEventListener('dragstart', handleDragStart);
            card.addEventListener('dragend', handleDragEnd);
            card.addEventListener('touchstart', handleTouchStart);
            card.addEventListener('touchmove', handleTouchMove);
            card.addEventListener('touchend', handleTouchEnd);
            card.addEventListener('click', () => addToAnswer(card));
            
            return card;
        }

        // ==================== æ‹–æ›³è™•ç† ====================
        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.classList.add('dragging');
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function allowDrop(e) {
            e.preventDefault();
        }

        function drop(e) {
            e.preventDefault();
            if (draggedElement) {
                addToAnswer(draggedElement);
            }
        }

        // ==================== è§¸æ§è™•ç† ====================
        let touchedElement = null;

        function handleTouchStart(e) {
            touchedElement = e.target;
            e.target.classList.add('dragging');
        }

        function handleTouchMove(e) {
            e.preventDefault();
        }

        function handleTouchEnd(e) {
            e.target.classList.remove('dragging');
            if (touchedElement) {
                addToAnswer(touchedElement);
            }
        }

        // ==================== åŠ å…¥ç­”æ¡ˆå€ ====================
        function addToAnswer(element) {
            const answerArea = document.getElementById('answerArea');
            const placeholder = document.getElementById('placeholder');
            
            if (placeholder) {
                placeholder.remove();
            }
            
            if (element.classList.contains('in-answer')) {
                element.classList.remove('in-answer');
                document.getElementById('wordsPool').appendChild(element);
            } else {
                element.classList.add('in-answer');
                answerArea.appendChild(element);
            }
            
            if (answerArea.children.length === 0) {
                answerArea.innerHTML = '<div class="answer-placeholder" id="placeholder">ğŸ“‹ å°‡å–®å­—æ‹–æ›³åˆ°é€™è£¡æ’åˆ—å¥å­</div>';
            }
        }

        // ==================== æ¸…ç©ºç­”æ¡ˆ ====================
        function clearAnswer() {
            const answerArea = document.getElementById('answerArea');
            const wordsPool = document.getElementById('wordsPool');
            const cards = answerArea.querySelectorAll('.word-card');
            
            cards.forEach(card => {
                card.classList.remove('in-answer');
                wordsPool.appendChild(card);
            });
            
            answerArea.innerHTML = '<div class="answer-placeholder" id="placeholder">ğŸ“‹ å°‡å–®å­—æ‹–æ›³åˆ°é€™è£¡æ’åˆ—å¥å­</div>';
            document.getElementById('feedback').style.display = 'none';
        }

        // ==================== æª¢æŸ¥ç­”æ¡ˆ ====================
        function checkAnswer() {
            const answerArea = document.getElementById('answerArea');
            const userAnswer = Array.from(answerArea.querySelectorAll('.word-card'))
                .map(card => card.textContent)
                .join(' ')
                .replace(/\s+([.,!?])/g, '$1')
                .trim();
            
            const correctAnswer = questions[currentQuestion].english;
            const feedback = document.getElementById('feedback');
            
            if (userAnswer === correctAnswer) {
                score++;
                feedback.className = 'feedback correct';
                feedback.textContent = 'âœ… æ­£ç¢º!å¤ªæ£’äº†!';
                feedback.style.display = 'block';
                
                document.getElementById('score').textContent = `âœ… ${score} / ${questions.length}`;
                document.getElementById('checkBtn').style.display = 'none';
                document.getElementById('nextBtn').style.display = 'inline-flex';
                
                setTimeout(() => {
                    speakSentence(correctAnswer);
                }, 500);
                
            } else {
                feedback.className = 'feedback wrong';
                feedback.textContent = `âŒ ä¸å°å–”!æ­£ç¢ºç­”æ¡ˆ: ${correctAnswer}`;
                feedback.style.display = 'block';
            }
        }

        // ==================== ä¸‹ä¸€é¡Œ ====================
        function nextQuestion() {
            currentQuestion++;
            loadQuestion();
        }

        // ==================== é¡¯ç¤ºå®Œæˆç•«é¢ ====================
        function showCompletion() {
            const percentage = Math.round((score / questions.length) * 100);
            let message = '';
            
            if (percentage === 100) {
                message = 'ğŸ‰ å¤ªæ£’äº†!ä½ å…¨éƒ¨ç­”å°!';
            } else if (percentage >= 80) {
                message = 'ğŸ‘ å¾ˆæ£’!ç¹¼çºŒåŠ æ²¹!';
            } else if (percentage >= 60) {
                message = 'ğŸ’ª ä¸éŒ¯å–”!å†å¤šç·´ç¿’æœƒæ›´å¥½!';
            } else {
                message = 'ğŸ“š å†æ¥å†å²!å¤šç·´ç¿’å°±æœƒé€²æ­¥!';
            }
            
            document.getElementById('finalScore').textContent = `${score} / ${questions.length}`;
            document.getElementById('completionMessage').textContent = message;
            
            document.getElementById('gameCard').style.display = 'none';
            document.getElementById('completion').style.display = 'block';
        }

        // ==================== é‡æ–°é–‹å§‹ ====================
        function restartGame() {
            document.getElementById('gameCard').style.display = 'none';
            document.getElementById('completion').style.display = 'none';
            document.getElementById('difficultySelector').style.display = 'block';
        }

        // ==================== å†ç©ä¸€æ¬¡ (ç›¸åŒé›£åº¦,å…¨æ–°é¡Œç›®) ====================
        function playAgain() {
            // é‡æ–°æŠ½10é¡Œ
            const allQuestions = questionsByDifficulty[currentDifficulty];
            const shuffled = [...allQuestions].sort(() => Math.random() - 0.5);
            questions = shuffled.slice(0, 10);
            
            // é‡ç½®éŠæˆ²ç‹€æ…‹
            currentQuestion = 0;
            score = 0;
            
            // éš±è—å®Œæˆç•«é¢
            document.getElementById('completion').style.display = 'none';
            
            // é¡¯ç¤ºéŠæˆ²å¡ç‰‡
            const gameCard = document.getElementById('gameCard');
            gameCard.classList.add('active');
            gameCard.style.display = 'block';
            
            // è¼‰å…¥ç¬¬ä¸€é¡Œ
            loadQuestion();
        }

        // ==================== å›é¦–é  (é‡æ–°é¸æ“‡é›£åº¦) ====================
        function backToHome() {
            // éš±è—éŠæˆ²å¡ç‰‡
            document.getElementById('gameCard').classList.remove('active');
            document.getElementById('gameCard').style.display = 'none';
            
            // éš±è—å®Œæˆç•«é¢
            document.getElementById('completion').style.display = 'none';
            
            // é¡¯ç¤ºé›£åº¦é¸æ“‡
            document.getElementById('difficultySelector').style.display = 'block';
        }
    </script>
</body>
</html>
