<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <title>ğŸˆ 400å–®å­—å°„æ“ŠéŠæˆ² Word Shooter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* iPhoneè§¸æ§å„ªåŒ– */
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            /* iPhoneå¹³æ»‘æ»¾å‹• */
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
            /* iPhoneå®‰å…¨å€åŸŸæ”¯æŒ */
            padding-top: max(env(safe-area-inset-top), 0px);
            padding-bottom: max(env(safe-area-inset-bottom), 0px);
            max-width: 100vw;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* æ¨™é¡Œå€ */
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeInDown 0.8s;
        }

        .header h1 {
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        /* å–®å…ƒé¸æ“‡ç•«é¢ */
        .unit-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .unit-card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .unit-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .unit-card h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .unit-card p {
            color: #666;
            margin: 5px 0;
        }

        /* éŠæˆ²å€åŸŸ */
        .game-area {
            display: none;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 30px;
            min-height: 600px;
            position: relative;
        }

        .game-area.active {
            display: block;
        }

        /* éŠæˆ²è³‡è¨Šæ¬„ */
        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .info-item {
            text-align: center;
        }

        .info-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }

        .back-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: #ee5a52;
            transform: scale(1.05);
        }

        /* å•é¡Œå€ */
        .question-area {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .question-prompt {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 20px;
        }

        .word-display {
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
            margin: 20px 0;
            letter-spacing: 2px;
        }

        .speaker-icon {
            font-size: 4em;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            color: #667eea;
        }

        .speaker-icon:hover {
            transform: scale(1.2);
            color: #764ba2;
        }

        .speaker-icon:active {
            transform: scale(0.9);
        }

        /* æ°£çƒå€åŸŸ */
        .balloons-container {
            position: relative;
            min-height: 400px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 30px;
            padding: 20px;
        }

        .balloon {
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
            animation: float 3s ease-in-out infinite;
        }

        .balloon:nth-child(1) { animation-delay: 0s; }
        .balloon:nth-child(2) { animation-delay: 0.5s; }
        .balloon:nth-child(3) { animation-delay: 1s; }
        .balloon:nth-child(4) { animation-delay: 1.5s; }

        .balloon:hover {
            transform: scale(1.1);
        }

        .balloon-shape {
            width: 120px;
            height: 150px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .balloon:nth-child(1) .balloon-shape {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .balloon:nth-child(2) .balloon-shape {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .balloon:nth-child(3) .balloon-shape {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .balloon:nth-child(4) .balloon-shape {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .balloon-text {
            color: white;
            font-size: 1.3em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            padding: 10px;
            text-align: center;
        }

        .balloon-string {
            width: 2px;
            height: 60px;
            background: rgba(255,255,255,0.5);
            position: absolute;
            bottom: -60px;
            left: 50%;
            transform: translateX(-50%);
        }

        /* æ°£çƒé£„æµ®å‹•ç•« */
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(-2deg); }
            50% { transform: translateY(-20px) rotate(2deg); }
        }

        /* çˆ†ç‚¸ç‰¹æ•ˆ */
        @keyframes pop {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.5; }
            100% { transform: scale(0); opacity: 0; }
        }

        .balloon.popping {
            animation: pop 0.5s forwards;
        }

        /* éœ‡å‹•ç‰¹æ•ˆ */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .balloon.wrong {
            animation: shake 0.5s;
        }

        /* çµæœç•«é¢ */
        .result-screen {
            display: none;
            background: white;
            padding: 50px;
            border-radius: 30px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .result-screen.active {
            display: block;
            animation: zoomIn 0.5s;
        }

        .result-screen h2 {
            font-size: 2.5em;
            color: #667eea;
            margin-bottom: 20px;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
        }

        .stat-label {
            color: #666;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .result-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }

        .result-btn {
            padding: 15px 40px;
            border: none;
            border-radius: 15px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .retry-btn {
            background: #667eea;
            color: white;
        }

        .retry-btn:hover {
            background: #5568d3;
            transform: scale(1.05);
        }

        .home-btn {
            background: #6c757d;
            color: white;
        }

        .home-btn:hover {
            background: #5a6268;
            transform: scale(1.05);
        }

        /* å‹•ç•« */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* å›é¥‹è¨Šæ¯ */
        .feedback {
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px 50px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            font-size: 1.5em;
            font-weight: bold;
            z-index: 1000;
            display: none;
        }

        .feedback.correct {
            color: #28a745;
            border: 3px solid #28a745;
        }

        .feedback.wrong {
            color: #dc3545;
            border: 3px solid #dc3545;
        }

        .feedback.active {
            display: block;
            animation: zoomIn 0.3s;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .word-display {
                font-size: 2em;
            }

            .balloon-shape {
                width: 100px;
                height: 125px;
            }

            .balloon-text {
                font-size: 1.1em;
            }

            .balloons-container {
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- æ¨™é¡Œ -->
        <div class="header">
            <h1>ğŸˆ 400å–®å­—å°„æ“ŠéŠæˆ² (å°å­¸ç‰ˆ)</h1>
            <div class="subtitle">Word Shooter - è½ç™¼éŸ³,å°„æ°£çƒ!æ¯4èª²ä¸€å–®å…ƒ</div>
        </div>

        <!-- å–®å…ƒé¸æ“‡ -->
        <div id="unitSelection" class="unit-selection">
            <div class="unit-card" onclick="startGame(1)">
                <h2>ğŸ¯ å–®å…ƒ 1</h2>
                <p>èª² 1-4</p>
                <p>40å€‹å–®å­—</p>
            </div>
            <div class="unit-card" onclick="startGame(2)">
                <h2>ğŸ¯ å–®å…ƒ 2</h2>
                <p>èª² 5-8</p>
                <p>40å€‹å–®å­—</p>
            </div>
            <div class="unit-card" onclick="startGame(3)">
                <h2>ğŸ¯ å–®å…ƒ 3</h2>
                <p>èª² 9-12</p>
                <p>40å€‹å–®å­—</p>
            </div>
            <div class="unit-card" onclick="startGame(4)">
                <h2>ğŸ¯ å–®å…ƒ 4</h2>
                <p>èª² 13-16</p>
                <p>40å€‹å–®å­—</p>
            </div>
            <div class="unit-card" onclick="startGame(5)">
                <h2>ğŸ¯ å–®å…ƒ 5</h2>
                <p>èª² 17-20</p>
                <p>40å€‹å–®å­—</p>
            </div>
            <div class="unit-card" onclick="startGame(6)">
                <h2>ğŸ¯ å–®å…ƒ 6</h2>
                <p>èª² 21-24</p>
                <p>40å€‹å–®å­—</p>
            </div>
            <div class="unit-card" onclick="startGame(7)">
                <h2>ğŸ¯ å–®å…ƒ 7</h2>
                <p>èª² 25-28</p>
                <p>40å€‹å–®å­—</p>
            </div>
            <div class="unit-card" onclick="startGame(8)">
                <h2>ğŸ¯ å–®å…ƒ 8</h2>
                <p>èª² 29-32</p>
                <p>40å€‹å–®å­—</p>
            </div>
            <div class="unit-card" onclick="startGame(9)">
                <h2>ğŸ¯ å–®å…ƒ 9</h2>
                <p>èª² 33-36</p>
                <p>40å€‹å–®å­—</p>
            </div>
            <div class="unit-card" onclick="startGame(10)">
                <h2>ğŸ¯ å–®å…ƒ 10</h2>
                <p>èª² 37-40</p>
                <p>40å€‹å–®å­—</p>
            </div>
        </div>

        <!-- éŠæˆ²å€åŸŸ -->
        <div id="gameArea" class="game-area">
            <!-- éŠæˆ²è³‡è¨Šæ¬„ -->
            <div class="game-info">
                <div class="info-item">
                    <div class="info-label">é¡Œæ•¸</div>
                    <div class="info-value" id="questionNum">1/10</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ç­”å°</div>
                    <div class="info-value" id="correctCount">0</div>
                </div>
                <div class="info-item">
                    <div class="info-label">åˆ†æ•¸</div>
                    <div class="info-value" id="score">0</div>
                </div>
                <button class="back-btn" onclick="backToMenu()">ğŸ  è¿”å›</button>
            </div>

            <!-- å•é¡Œå€ -->
            <div class="question-area">
                <div class="question-prompt">ğŸ‘‚ è½è‹±æ–‡ç™¼éŸ³,é»æ“Šæ­£ç¢ºçš„ä¸­æ–‡æ°£çƒ!</div>
                <div class="speaker-icon" onclick="speakWord()" title="é»æ“Šé‡è½">ğŸ”Š</div>
                <div class="word-display" id="wordDisplay">???</div>
            </div>

            <!-- æ°£çƒå€åŸŸ -->
            <div class="balloons-container" id="balloonsContainer"></div>
        </div>

        <!-- çµæœç•«é¢ -->
        <div id="resultScreen" class="result-screen">
            <h2>ğŸ‰ éŠæˆ²çµæŸ!</h2>
            <div class="result-stats">
                <div class="stat-item">
                    <div class="stat-label">ç¸½é¡Œæ•¸</div>
                    <div class="stat-value" id="totalQuestions">10</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">ç­”å°</div>
                    <div class="stat-value" id="finalCorrect">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">æ­£ç¢ºç‡</div>
                    <div class="stat-value" id="accuracy">0%</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">ç¸½åˆ†</div>
                    <div class="stat-value" id="finalScore">0</div>
                </div>
            </div>
            <div class="result-buttons">
                <button class="result-btn retry-btn" onclick="retryGame()">ğŸ”„ å†ç©ä¸€æ¬¡</button>
                <button class="result-btn home-btn" onclick="backToMenu()">ğŸ  å›ä¸»é¸å–®</button>
            </div>
        </div>

        <!-- å›é¥‹è¨Šæ¯ -->
        <div id="feedback" class="feedback"></div>
    </div>

    <script>
        // éŠæˆ²è³‡æ–™åº« - 400å€‹å–®å­—,åˆ†æˆ10å€‹å–®å…ƒ,æ¯å–®å…ƒ4èª²40å€‹å­—
        const vocabulary = {
            1: [ // å–®å…ƒ1: èª²1-4 (å•å€™ã€æ•™å®¤ã€æ•¸å­—ã€é¡è‰²)
                // èª²1: å•å€™èª
                {english: 'hello', chinese: 'å“ˆå›‰'},
                {english: 'hi', chinese: 'å—¨'},
                {english: 'good', chinese: 'å¥½çš„'},
                {english: 'morning', chinese: 'æ—©ä¸Š'},
                {english: 'afternoon', chinese: 'ä¸‹åˆ'},
                {english: 'evening', chinese: 'æ™šä¸Š'},
                {english: 'night', chinese: 'å¤œæ™š'},
                {english: 'thank you', chinese: 'è¬è¬'},
                {english: 'you', chinese: 'ä½ '},
                {english: 'welcome', chinese: 'æ­¡è¿'},
                // èª²2: è‡ªæˆ‘ä»‹ç´¹
                {english: 'I', chinese: 'æˆ‘'},
                {english: 'am', chinese: 'æ˜¯'},
                {english: 'my', chinese: 'æˆ‘çš„'},
                {english: 'name', chinese: 'åå­—'},
                {english: 'is', chinese: 'æ˜¯'},
                {english: 'nice', chinese: 'å¥½çš„'},
                {english: 'to', chinese: 'å»'},
                {english: 'meet', chinese: 'è¦‹é¢'},
                {english: 'too', chinese: 'ä¹Ÿ'},
                {english: 'how', chinese: 'å¦‚ä½•'},
                // èª²3: åŸºæœ¬å°è©±
                {english: 'are', chinese: 'æ˜¯'},
                {english: 'fine', chinese: 'å¥½çš„'},
                {english: 'and', chinese: 'å’Œ'},
                {english: 'yes', chinese: 'æ˜¯çš„'},
                {english: 'no', chinese: 'ä¸'},
                {english: 'OK', chinese: 'å¥½çš„'},
                {english: 'bye', chinese: 'å†è¦‹'},
                {english: 'see', chinese: 'çœ‹è¦‹'},
                {english: 'later', chinese: 'ç¨å¾Œ'},
                {english: 'sorry', chinese: 'æŠ±æ­‰'},
                // èª²4: ç¦®è²Œç”¨èª
                {english: 'excuse', chinese: 'åŸè«’'},
                {english: 'me', chinese: 'æˆ‘'},
                {english: 'please', chinese: 'è«‹'},
                {english: 'here', chinese: 'é€™è£¡'},
                {english: 'this', chinese: 'é€™å€‹'},
                {english: 'that', chinese: 'é‚£å€‹'},
                {english: 'what', chinese: 'ä»€éº¼'},
                {english: 'it', chinese: 'å®ƒ'},
                {english: 'the', chinese: 'é€™å€‹'},
                {english: 'a', chinese: 'ä¸€å€‹'}
            ],
            2: [ // å–®å…ƒ2: èª²5-8 (æ•™å®¤ç”¨å“ã€æ•¸å­—ã€é¡è‰²)
                // èª²5: æ–‡å…·
                {english: 'an', chinese: 'ä¸€å€‹'},
                {english: 'book', chinese: 'æ›¸'},
                {english: 'pen', chinese: 'ç­†'},
                {english: 'pencil', chinese: 'é‰›ç­†'},
                {english: 'eraser', chinese: 'æ©¡çš®æ“¦'},
                {english: 'ruler', chinese: 'å°º'},
                {english: 'bag', chinese: 'è¢‹å­'},
                {english: 'desk', chinese: 'æ›¸æ¡Œ'},
                {english: 'chair', chinese: 'æ¤…å­'},
                {english: 'door', chinese: 'é–€'},
                // èª²6: æ•™å®¤
                {english: 'window', chinese: 'çª—æˆ¶'},
                {english: 'board', chinese: 'æ¿å­'},
                {english: 'teacher', chinese: 'è€å¸«'},
                {english: 'student', chinese: 'å­¸ç”Ÿ'},
                {english: 'class', chinese: 'ç­ç´š'},
                {english: 'school', chinese: 'å­¸æ ¡'},
                {english: 'one', chinese: 'ä¸€'},
                {english: 'two', chinese: 'äºŒ'},
                {english: 'three', chinese: 'ä¸‰'},
                {english: 'four', chinese: 'å››'},
                // èª²7: æ•¸å­—
                {english: 'five', chinese: 'äº”'},
                {english: 'six', chinese: 'å…­'},
                {english: 'seven', chinese: 'ä¸ƒ'},
                {english: 'eight', chinese: 'å…«'},
                {english: 'nine', chinese: 'ä¹'},
                {english: 'ten', chinese: 'å'},
                {english: 'red', chinese: 'ç´…è‰²'},
                {english: 'blue', chinese: 'è—è‰²'},
                {english: 'green', chinese: 'ç¶ è‰²'},
                {english: 'yellow', chinese: 'é»ƒè‰²'},
                // èª²8: é¡è‰²èˆ‡å½¢å®¹è©
                {english: 'black', chinese: 'é»‘è‰²'},
                {english: 'white', chinese: 'ç™½è‰²'},
                {english: 'color', chinese: 'é¡è‰²'},
                {english: 'big', chinese: 'å¤§çš„'},
                {english: 'small', chinese: 'å°çš„'},
                {english: 'long', chinese: 'é•·çš„'},
                {english: 'short', chinese: 'çŸ­çš„'},
                {english: 'new', chinese: 'æ–°çš„'},
                {english: 'old', chinese: 'èˆŠçš„'},
                {english: 'cat', chinese: 'è²“'}
            ],
            3: [ // å–®å…ƒ3: èª²9-12 (å‹•ç‰©ã€å®¶äºº)
                // èª²9: å‹•ç‰©
                {english: 'dog', chinese: 'ç‹—'},
                {english: 'bird', chinese: 'é³¥'},
                {english: 'fish', chinese: 'é­š'},
                {english: 'he', chinese: 'ä»–'},
                {english: 'she', chinese: 'å¥¹'},
                {english: 'they', chinese: 'ä»–å€‘'},
                {english: 'we', chinese: 'æˆ‘å€‘'},
                {english: 'boy', chinese: 'ç”·å­©'},
                {english: 'girl', chinese: 'å¥³å­©'},
                {english: 'man', chinese: 'ç”·äºº'},
                // èª²10: äººç¨±
                {english: 'woman', chinese: 'å¥³äºº'},
                {english: 'family', chinese: 'å®¶åº­'},
                {english: 'father', chinese: 'çˆ¶è¦ª'},
                {english: 'mother', chinese: 'æ¯è¦ª'},
                {english: 'brother', chinese: 'å…„å¼Ÿ'},
                {english: 'sister', chinese: 'å§Šå¦¹'},
                {english: 'happy', chinese: 'å¿«æ¨‚çš„'},
                {english: 'sad', chinese: 'æ‚²å‚·çš„'},
                {english: 'home', chinese: 'å®¶'},
                {english: 'house', chinese: 'æˆ¿å­'},
                // èª²11: å®¶å±…
                {english: 'room', chinese: 'æˆ¿é–“'},
                {english: 'kitchen', chinese: 'å»šæˆ¿'},
                {english: 'bathroom', chinese: 'æµ´å®¤'},
                {english: 'bedroom', chinese: 'è‡¥å®¤'},
                {english: 'living', chinese: 'ç”Ÿæ´»'},
                {english: 'table', chinese: 'æ¡Œå­'},
                {english: 'sofa', chinese: 'æ²™ç™¼'},
                {english: 'bed', chinese: 'åºŠ'},
                {english: 'TV', chinese: 'é›»è¦–'},
                {english: 'phone', chinese: 'é›»è©±'},
                // èª²12: 3Cç”¨å“
                {english: 'computer', chinese: 'é›»è…¦'},
                {english: 'clock', chinese: 'æ™‚é˜'},
                {english: 'time', chinese: 'æ™‚é–“'},
                {english: 'day', chinese: 'å¤©'},
                {english: 'week', chinese: 'é€±'},
                {english: 'month', chinese: 'æœˆ'},
                {english: 'year', chinese: 'å¹´'},
                {english: 'today', chinese: 'ä»Šå¤©'},
                {english: 'Monday', chinese: 'æ˜ŸæœŸä¸€'},
                {english: 'Tuesday', chinese: 'æ˜ŸæœŸäºŒ'}
            ],
            4: [ // å–®å…ƒ4: èª²13-16 (æ˜ŸæœŸã€é£Ÿç‰©)
                // èª²13: æ˜ŸæœŸ
                {english: 'Wednesday', chinese: 'æ˜ŸæœŸä¸‰'},
                {english: 'Thursday', chinese: 'æ˜ŸæœŸå››'},
                {english: 'Friday', chinese: 'æ˜ŸæœŸäº”'},
                {english: 'Saturday', chinese: 'æ˜ŸæœŸå…­'},
                {english: 'Sunday', chinese: 'æ˜ŸæœŸæ—¥'},
                {english: 'eat', chinese: 'åƒ'},
                {english: 'drink', chinese: 'å–'},
                {english: 'breakfast', chinese: 'æ—©é¤'},
                {english: 'lunch', chinese: 'åˆé¤'},
                {english: 'dinner', chinese: 'æ™šé¤'},
                // èª²14: ä¸‰é¤
                {english: 'food', chinese: 'é£Ÿç‰©'},
                {english: 'rice', chinese: 'ç±³é£¯'},
                {english: 'bread', chinese: 'éºµåŒ…'},
                {english: 'egg', chinese: 'è›‹'},
                {english: 'milk', chinese: 'ç‰›å¥¶'},
                {english: 'water', chinese: 'æ°´'},
                {english: 'tea', chinese: 'èŒ¶'},
                {english: 'juice', chinese: 'æœæ±'},
                {english: 'apple', chinese: 'è˜‹æœ'},
                {english: 'banana', chinese: 'é¦™è•‰'},
                // èª²15: æ°´æœ
                {english: 'orange', chinese: 'æ©˜å­'},
                {english: 'fruit', chinese: 'æ°´æœ'},
                {english: 'like', chinese: 'å–œæ­¡'},
                {english: 'love', chinese: 'æ„›'},
                {english: 'want', chinese: 'æƒ³è¦'},
                {english: 'need', chinese: 'éœ€è¦'},
                {english: 'have', chinese: 'æœ‰'},
                {english: 'get', chinese: 'å¾—åˆ°'},
                {english: 'give', chinese: 'çµ¦'},
                {english: 'take', chinese: 'æ‹¿'},
                // èª²16: å‹•è©
                {english: 'make', chinese: 'åš'},
                {english: 'do', chinese: 'åš'},
                {english: 'go', chinese: 'å»'},
                {english: 'come', chinese: 'ä¾†'},
                {english: 'walk', chinese: 'èµ°'},
                {english: 'run', chinese: 'è·‘'},
                {english: 'jump', chinese: 'è·³'},
                {english: 'sit', chinese: 'å'},
                {english: 'stand', chinese: 'ç«™'},
                {english: 'sleep', chinese: 'ç¡è¦º'}
            ],
            5: [ // å–®å…ƒ5: èª²17-20 (å‹•ä½œã€è¡£ç‰©)
                // èª²17: æ—¥å¸¸å‹•ä½œ
                {english: 'wake', chinese: 'é†’ä¾†'},
                {english: 'wash', chinese: 'æ´—'},
                {english: 'brush', chinese: 'åˆ·'},
                {english: 'wear', chinese: 'ç©¿'},
                {english: 'clothes', chinese: 'è¡£æœ'},
                {english: 'shirt', chinese: 'è¥¯è¡«'},
                {english: 'pants', chinese: 'è¤²å­'},
                {english: 'shoes', chinese: 'é‹å­'},
                {english: 'hat', chinese: 'å¸½å­'},
                {english: 'coat', chinese: 'å¤–å¥—'},
                // èª²18: å¤©æ°£
                {english: 'hot', chinese: 'ç†±çš„'},
                {english: 'cold', chinese: 'å†·çš„'},
                {english: 'warm', chinese: 'æº«æš–çš„'},
                {english: 'cool', chinese: 'æ¶¼çˆ½çš„'},
                {english: 'weather', chinese: 'å¤©æ°£'},
                {english: 'sunny', chinese: 'æ™´æœ—çš„'},
                {english: 'rainy', chinese: 'ä¸‹é›¨çš„'},
                {english: 'cloudy', chinese: 'å¤šé›²çš„'},
                {english: 'windy', chinese: 'æœ‰é¢¨çš„'},
                {english: 'spring', chinese: 'æ˜¥å¤©'},
                // èª²19: å­£ç¯€
                {english: 'summer', chinese: 'å¤å¤©'},
                {english: 'fall', chinese: 'ç§‹å¤©'},
                {english: 'winter', chinese: 'å†¬å¤©'},
                {english: 'beautiful', chinese: 'ç¾éº—çš„'},
                {english: 'pretty', chinese: 'æ¼‚äº®çš„'},
                {english: 'tall', chinese: 'é«˜çš„'},
                {english: 'short', chinese: 'çŸ®çš„'},
                {english: 'fat', chinese: 'èƒ–çš„'},
                {english: 'thin', chinese: 'ç˜¦çš„'},
                {english: 'strong', chinese: 'å¼·å£¯çš„'},
                // èª²20: å½¢å®¹è©
                {english: 'weak', chinese: 'è™›å¼±çš„'},
                {english: 'fast', chinese: 'å¿«çš„'},
                {english: 'slow', chinese: 'æ…¢çš„'},
                {english: 'easy', chinese: 'å®¹æ˜“çš„'},
                {english: 'hard', chinese: 'å›°é›£çš„'},
                {english: 'right', chinese: 'å°çš„'},
                {english: 'wrong', chinese: 'éŒ¯çš„'},
                {english: 'good', chinese: 'å¥½çš„'},
                {english: 'bad', chinese: 'å£çš„'},
                {english: 'friend', chinese: 'æœ‹å‹'}
            ],
            6: [ // å–®å…ƒ6: èª²21-24 (äººéš›ã€æ´»å‹•)
                // èª²21: äººéš›é—œä¿‚
                {english: 'people', chinese: 'äººå€‘'},
                {english: 'everyone', chinese: 'æ¯å€‹äºº'},
                {english: 'someone', chinese: 'æŸäºº'},
                {english: 'nobody', chinese: 'æ²’æœ‰äºº'},
                {english: 'help', chinese: 'å¹«åŠ©'},
                {english: 'thank', chinese: 'æ„Ÿè¬'},
                {english: 'kind', chinese: 'å‹å–„çš„'},
                {english: 'smart', chinese: 'è°æ˜çš„'},
                {english: 'funny', chinese: 'æœ‰è¶£çš„'},
                {english: 'play', chinese: 'ç©'},
                // èª²22: éŠæˆ²å¨›æ¨‚
                {english: 'game', chinese: 'éŠæˆ²'},
                {english: 'ball', chinese: 'çƒ'},
                {english: 'toy', chinese: 'ç©å…·'},
                {english: 'music', chinese: 'éŸ³æ¨‚'},
                {english: 'sing', chinese: 'å”±æ­Œ'},
                {english: 'dance', chinese: 'è·³èˆ'},
                {english: 'movie', chinese: 'é›»å½±'},
                {english: 'watch', chinese: 'è§€çœ‹'},
                {english: 'read', chinese: 'é–±è®€'},
                {english: 'write', chinese: 'å¯«'},
                // èª²23: å­¸ç¿’
                {english: 'draw', chinese: 'ç•«'},
                {english: 'study', chinese: 'å­¸ç¿’'},
                {english: 'learn', chinese: 'å­¸ç¿’'},
                {english: 'know', chinese: 'çŸ¥é“'},
                {english: 'think', chinese: 'æƒ³'},
                {english: 'understand', chinese: 'ç†è§£'},
                {english: 'remember', chinese: 'è¨˜å¾—'},
                {english: 'forget', chinese: 'å¿˜è¨˜'},
                {english: 'talk', chinese: 'èªªè©±'},
                {english: 'speak', chinese: 'è¬›'},
                // èª²24: æºé€š
                {english: 'tell', chinese: 'å‘Šè¨´'},
                {english: 'ask', chinese: 'å•'},
                {english: 'answer', chinese: 'å›ç­”'},
                {english: 'listen', chinese: 'è½'},
                {english: 'hear', chinese: 'è½åˆ°'},
                {english: 'look', chinese: 'çœ‹'},
                {english: 'see', chinese: 'çœ‹è¦‹'},
                {english: 'find', chinese: 'æ‰¾åˆ°'},
                {english: 'lose', chinese: 'å¤±å»'},
                {english: 'open', chinese: 'æ‰“é–‹'}
            ],
            7: [ // å–®å…ƒ7: èª²25-28 (å‹•ä½œã€åœ°é»)
                // èª²25: å‹•ä½œ
                {english: 'close', chinese: 'é—œé–‰'},
                {english: 'start', chinese: 'é–‹å§‹'},
                {english: 'stop', chinese: 'åœæ­¢'},
                {english: 'finish', chinese: 'å®Œæˆ'},
                {english: 'wait', chinese: 'ç­‰å¾…'},
                {english: 'arrive', chinese: 'åˆ°é”'},
                {english: 'leave', chinese: 'é›¢é–‹'},
                {english: 'stay', chinese: 'åœç•™'},
                {english: 'travel', chinese: 'æ—…è¡Œ'},
                {english: 'visit', chinese: 'åƒè§€'},
                // èª²26: åœ°é»
                {english: 'country', chinese: 'åœ‹å®¶'},
                {english: 'city', chinese: 'åŸå¸‚'},
                {english: 'street', chinese: 'è¡—é“'},
                {english: 'park', chinese: 'å…¬åœ’'},
                {english: 'store', chinese: 'å•†åº—'},
                {english: 'restaurant', chinese: 'é¤å»³'},
                {english: 'hospital', chinese: 'é†«é™¢'},
                {english: 'bank', chinese: 'éŠ€è¡Œ'},
                {english: 'post', chinese: 'éƒµå±€'},
                {english: 'office', chinese: 'è¾¦å…¬å®¤'},
                // èª²27: å…¬å…±å ´æ‰€
                {english: 'library', chinese: 'åœ–æ›¸é¤¨'},
                {english: 'museum', chinese: 'åšç‰©é¤¨'},
                {english: 'station', chinese: 'è»Šç«™'},
                {english: 'airport', chinese: 'æ©Ÿå ´'},
                {english: 'bus', chinese: 'å…¬è»Š'},
                {english: 'train', chinese: 'ç«è»Š'},
                {english: 'car', chinese: 'æ±½è»Š'},
                {english: 'bike', chinese: 'è…³è¸è»Š'},
                {english: 'plane', chinese: 'é£›æ©Ÿ'},
                {english: 'ship', chinese: 'èˆ¹'},
                // èª²28: äº¤é€š
                {english: 'drive', chinese: 'é–‹è»Š'},
                {english: 'ride', chinese: 'é¨'},
                {english: 'fly', chinese: 'é£›'},
                {english: 'turn', chinese: 'è½‰'},
                {english: 'left', chinese: 'å·¦é‚Š'},
                {english: 'right', chinese: 'å³é‚Š'},
                {english: 'up', chinese: 'ä¸Š'},
                {english: 'down', chinese: 'ä¸‹'},
                {english: 'front', chinese: 'å‰é¢'},
                {english: 'back', chinese: 'å¾Œé¢'}
            ],
            8: [ // å–®å…ƒ8: èª²29-32 (ä½ç½®ã€é‡‘éŒ¢)
                // èª²29: æ–¹ä½
                {english: 'near', chinese: 'é™„è¿‘'},
                {english: 'far', chinese: 'é çš„'},
                {english: 'next', chinese: 'ä¸‹ä¸€å€‹'},
                {english: 'between', chinese: 'ä¹‹é–“'},
                {english: 'money', chinese: 'éŒ¢'},
                {english: 'buy', chinese: 'è²·'},
                {english: 'sell', chinese: 'è³£'},
                {english: 'price', chinese: 'åƒ¹æ ¼'},
                {english: 'cheap', chinese: 'ä¾¿å®œçš„'},
                {english: 'expensive', chinese: 'æ˜‚è²´çš„'},
                // èª²30: è³¼ç‰©
                {english: 'free', chinese: 'å…è²»çš„'},
                {english: 'pay', chinese: 'ä»˜éŒ¢'},
                {english: 'cost', chinese: 'èŠ±è²»'},
                {english: 'save', chinese: 'å„²è“„'},
                {english: 'spend', chinese: 'èŠ±è²»'},
                {english: 'rich', chinese: 'å¯Œæœ‰çš„'},
                {english: 'poor', chinese: 'è²§çª®çš„'},
                {english: 'job', chinese: 'å·¥ä½œ'},
                {english: 'work', chinese: 'å·¥ä½œ'},
                {english: 'worker', chinese: 'å·¥äºº'},
                // èª²31: è·æ¥­
                {english: 'doctor', chinese: 'é†«ç”Ÿ'},
                {english: 'nurse', chinese: 'è­·å£«'},
                {english: 'police', chinese: 'è­¦å¯Ÿ'},
                {english: 'cook', chinese: 'å»šå¸«'},
                {english: 'farmer', chinese: 'è¾²å¤«'},
                {english: 'engineer', chinese: 'å·¥ç¨‹å¸«'},
                {english: 'artist', chinese: 'è—è¡“å®¶'},
                {english: 'singer', chinese: 'æ­Œæ‰‹'},
                {english: 'actor', chinese: 'æ¼”å“¡'},
                {english: 'writer', chinese: 'ä½œå®¶'},
                // èª²32: æ„Ÿå—
                {english: 'busy', chinese: 'å¿™ç¢Œçš„'},
                {english: 'tired', chinese: 'ç–²å€¦çš„'},
                {english: 'sick', chinese: 'ç”Ÿç—…çš„'},
                {english: 'healthy', chinese: 'å¥åº·çš„'},
                {english: 'feel', chinese: 'æ„Ÿè¦º'},
                {english: 'hurt', chinese: 'å—å‚·'},
                {english: 'pain', chinese: 'ç–¼ç—›'},
                {english: 'medicine', chinese: 'è—¥'},
                {english: 'rest', chinese: 'ä¼‘æ¯'},
                {english: 'better', chinese: 'æ›´å¥½çš„'}
            ],
            9: [ // å–®å…ƒ9: èª²33-36 (å¥åº·ã€é‹å‹•)
                // èª²33: å¥åº·
                {english: 'worse', chinese: 'æ›´ç³Ÿçš„'},
                {english: 'care', chinese: 'ç…§é¡§'},
                {english: 'check', chinese: 'æª¢æŸ¥'},
                {english: 'body', chinese: 'èº«é«”'},
                {english: 'head', chinese: 'é ­'},
                {english: 'face', chinese: 'è‡‰'},
                {english: 'eye', chinese: 'çœ¼ç›'},
                {english: 'ear', chinese: 'è€³æœµ'},
                {english: 'nose', chinese: 'é¼»å­'},
                {english: 'mouth', chinese: 'å˜´å·´'},
                // èª²34: èº«é«”éƒ¨ä½
                {english: 'tooth', chinese: 'ç‰™é½’'},
                {english: 'hand', chinese: 'æ‰‹'},
                {english: 'foot', chinese: 'è…³'},
                {english: 'leg', chinese: 'è…¿'},
                {english: 'arm', chinese: 'æ‰‹è‡‚'},
                {english: 'finger', chinese: 'æ‰‹æŒ‡'},
                {english: 'hair', chinese: 'é ­é«®'},
                {english: 'exercise', chinese: 'é‹å‹•'},
                {english: 'sport', chinese: 'é‹å‹•'},
                {english: 'swim', chinese: 'æ¸¸æ³³'},
                // èª²35: é‹å‹•
                {english: 'basketball', chinese: 'ç±ƒçƒ'},
                {english: 'baseball', chinese: 'æ£’çƒ'},
                {english: 'soccer', chinese: 'è¶³çƒ'},
                {english: 'tennis', chinese: 'ç¶²çƒ'},
                {english: 'player', chinese: 'é¸æ‰‹'},
                {english: 'win', chinese: 'è´'},
                {english: 'lose', chinese: 'è¼¸'},
                {english: 'team', chinese: 'éšŠä¼'},
                {english: 'member', chinese: 'æˆå“¡'},
                {english: 'hobby', chinese: 'å—œå¥½'},
                // èª²36: èˆˆè¶£
                {english: 'interest', chinese: 'èˆˆè¶£'},
                {english: 'enjoy', chinese: 'äº«å—'},
                {english: 'fun', chinese: 'æœ‰è¶£çš„'},
                {english: 'boring', chinese: 'ç„¡èŠçš„'},
                {english: 'exciting', chinese: 'ä»¤äººèˆˆå¥®çš„'},
                {english: 'interesting', chinese: 'æœ‰è¶£çš„'},
                {english: 'important', chinese: 'é‡è¦çš„'},
                {english: 'special', chinese: 'ç‰¹åˆ¥çš„'},
                {english: 'different', chinese: 'ä¸åŒçš„'},
                {english: 'same', chinese: 'ç›¸åŒçš„'}
            ],
            10: [ // å–®å…ƒ10: èª²37-40 (æ•¸é‡ã€å‰¯è©)
                // èª²37: å…¶ä»–
                {english: 'another', chinese: 'å¦ä¸€å€‹'},
                {english: 'other', chinese: 'å…¶ä»–çš„'},
                {english: 'all', chinese: 'å…¨éƒ¨'},
                {english: 'some', chinese: 'ä¸€äº›'},
                {english: 'many', chinese: 'è¨±å¤š'},
                {english: 'much', chinese: 'å¾ˆå¤š'},
                {english: 'few', chinese: 'å°‘æ•¸'},
                {english: 'little', chinese: 'å°‘è¨±'},
                {english: 'more', chinese: 'æ›´å¤š'},
                {english: 'less', chinese: 'æ›´å°‘'},
                // èª²38: æ•¸é‡
                {english: 'most', chinese: 'æœ€å¤š'},
                {english: 'enough', chinese: 'è¶³å¤ çš„'},
                {english: 'very', chinese: 'éå¸¸'},
                {english: 'really', chinese: 'çœŸçš„'},
                {english: 'quite', chinese: 'ç›¸ç•¶'},
                {english: 'too', chinese: 'å¤ª'},
                {english: 'so', chinese: 'å¦‚æ­¤'},
                {english: 'well', chinese: 'å¥½åœ°'},
                {english: 'better', chinese: 'æ›´å¥½'},
                {english: 'best', chinese: 'æœ€å¥½'},
                // èª²39: é »ç‡
                {english: 'always', chinese: 'ç¸½æ˜¯'},
                {english: 'usually', chinese: 'é€šå¸¸'},
                {english: 'often', chinese: 'ç¶“å¸¸'},
                {english: 'sometimes', chinese: 'æœ‰æ™‚'},
                {english: 'never', chinese: 'å¾ä¸'},
                {english: 'maybe', chinese: 'ä¹Ÿè¨±'},
                {english: 'sure', chinese: 'ç¢ºå®š'},
                {english: 'of', chinese: 'çš„'},
                {english: 'course', chinese: 'ç•¶ç„¶'},
                {english: 'problem', chinese: 'å•é¡Œ'},
                // èª²40: å…¶ä»–å¸¸ç”¨
                {english: 'question', chinese: 'å•é¡Œ'},
                {english: 'idea', chinese: 'ä¸»æ„'},
                {english: 'plan', chinese: 'è¨ˆåŠƒ'},
                {english: 'try', chinese: 'å˜—è©¦'},
                {english: 'use', chinese: 'ä½¿ç”¨'},
                {english: 'practice', chinese: 'ç·´ç¿’'},
                {english: 'difficult', chinese: 'å›°é›£çš„'},
                {english: 'simple', chinese: 'ç°¡å–®çš„'},
                {english: 'possible', chinese: 'å¯èƒ½çš„'},
                {english: 'impossible', chinese: 'ä¸å¯èƒ½çš„'}
            ]
        };

        // éŠæˆ²ç‹€æ…‹
        let currentUnit = 1;
        let currentQuestion = 0;
        let score = 0;
        let correctAnswers = 0;
        let totalQuestions = 10;
        let gameQuestions = [];
        let currentWord = null;

        // éŸ³æ•ˆç³»çµ±
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        function playSuccessSound() {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 523.25; // C5
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        function playErrorSound() {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 200; // G3
            oscillator.type = 'sawtooth';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        // èªéŸ³ç³»çµ± - é€£çºŒæœ—è®€å…©æ¬¡
        function speakWord(word = currentWord, times = 2) {
            if ('speechSynthesis' in window && word) {
                window.speechSynthesis.cancel();
                
                // ç¬¬ä¸€æ¬¡æœ—è®€
                const utterance1 = new SpeechSynthesisUtterance(word.english);
                utterance1.lang = 'en-US';
                utterance1.rate = 0.85; // é€Ÿåº¦èª¿æ…¢5%
                utterance1.pitch = 1;
                utterance1.volume = 1;
                
                window.speechSynthesis.speak(utterance1);
                
                // å¦‚æœéœ€è¦æœ—è®€ç¬¬äºŒæ¬¡
                if (times === 2) {
                    utterance1.onend = function() {
                        setTimeout(() => {
                            const utterance2 = new SpeechSynthesisUtterance(word.english);
                            utterance2.lang = 'en-US';
                            utterance2.rate = 0.85;
                            utterance2.pitch = 1;
                            utterance2.volume = 1;
                            
                            window.speechSynthesis.speak(utterance2);
                        }, 300); // é–“éš”0.3ç§’
                    };
                }
            }
        }

        // é–‹å§‹éŠæˆ²
        function startGame(unit) {
            currentUnit = unit;
            currentQuestion = 0;
            score = 0;
            correctAnswers = 0;
            
            // å¾è©²å–®å…ƒéš¨æ©Ÿé¸10é¡Œ
            const allWords = vocabulary[unit];
            gameQuestions = [];
            const usedIndices = new Set();
            
            while (gameQuestions.length < totalQuestions) {
                const randomIndex = Math.floor(Math.random() * allWords.length);
                if (!usedIndices.has(randomIndex)) {
                    usedIndices.add(randomIndex);
                    gameQuestions.push(allWords[randomIndex]);
                }
            }
            
            // åˆ‡æ›ç•«é¢
            document.getElementById('unitSelection').style.display = 'none';
            document.getElementById('gameArea').classList.add('active');
            document.getElementById('resultScreen').classList.remove('active');
            
            // é–‹å§‹ç¬¬ä¸€é¡Œ
            loadQuestion();
        }

        // è¼‰å…¥é¡Œç›®
        function loadQuestion() {
            if (currentQuestion >= totalQuestions) {
                showResults();
                return;
            }
            
            currentWord = gameQuestions[currentQuestion];
            
            // æ›´æ–°è³‡è¨Šæ¬„
            document.getElementById('questionNum').textContent = `${currentQuestion + 1}/${totalQuestions}`;
            document.getElementById('correctCount').textContent = correctAnswers;
            document.getElementById('score').textContent = score;
            
            // é¡¯ç¤ºè‹±æ–‡å–®å­—(å¯é¸)
            document.getElementById('wordDisplay').textContent = '???';
            
            // ç”Ÿæˆé¸é …æ°£çƒ
            generateBalloons();
            
            // å»¶é²1ç§’å¾Œè‡ªå‹•æ’­æ”¾
            setTimeout(() => {
                speakWord(currentWord);
            }, 500);
        }

        // ç”Ÿæˆæ°£çƒé¸é …
        function generateBalloons() {
            const container = document.getElementById('balloonsContainer');
            container.innerHTML = '';
            
            // æº–å‚™4å€‹é¸é …:1å€‹æ­£ç¢º+3å€‹éŒ¯èª¤
            const options = [currentWord];
            const allWords = vocabulary[currentUnit];
            const usedIndices = new Set([gameQuestions.indexOf(currentWord)]);
            
            while (options.length < 4) {
                const randomIndex = Math.floor(Math.random() * allWords.length);
                if (!usedIndices.has(randomIndex)) {
                    usedIndices.add(randomIndex);
                    options.push(allWords[randomIndex]);
                }
            }
            
            // éš¨æ©Ÿæ’åˆ—
            shuffleArray(options);
            
            // å‰µå»ºæ°£çƒ
            options.forEach((word, index) => {
                const balloon = document.createElement('div');
                balloon.className = 'balloon';
                balloon.innerHTML = `
                    <div class="balloon-shape">
                        <div class="balloon-text">${word.chinese}</div>
                    </div>
                    <div class="balloon-string"></div>
                `;
                balloon.onclick = () => checkAnswer(word, balloon);
                container.appendChild(balloon);
            });
        }

        // æª¢æŸ¥ç­”æ¡ˆ
        function checkAnswer(selectedWord, balloon) {
            const allBalloons = document.querySelectorAll('.balloon');
            allBalloons.forEach(b => b.style.pointerEvents = 'none'); // ç¦ç”¨é»æ“Š
            
            if (selectedWord.english === currentWord.english) {
                // ç­”å°
                correctAnswers++;
                score += 10;
                
                // çˆ†ç‚¸å‹•ç•«
                balloon.classList.add('popping');
                playSuccessSound();
                showFeedback('âœ… å¤ªæ£’äº†!', 'correct');
                
                // é¡¯ç¤ºè‹±æ–‡å–®å­—
                document.getElementById('wordDisplay').textContent = currentWord.english;
                
                // å»¶é²4ç§’å¾Œä¸‹ä¸€é¡Œ (è®“å­¸ç”Ÿçœ‹æ¸…æ¥šè‹±æ–‡)
                setTimeout(() => {
                    currentQuestion++;
                    loadQuestion();
                }, 4000);
            } else {
                // ç­”éŒ¯
                balloon.classList.add('wrong');
                playErrorSound();
                showFeedback(`âŒ éŒ¯äº†!\næ­£ç¢ºç­”æ¡ˆæ˜¯: ${currentWord.chinese}`, 'wrong');
                
                // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
                document.getElementById('wordDisplay').textContent = currentWord.english;
                speakWord(currentWord);
                
                // å»¶é²5ç§’å¾Œä¸‹ä¸€é¡Œ (ç­”éŒ¯æ™‚å¤šçµ¦1ç§’è¤‡ç¿’)
                setTimeout(() => {
                    currentQuestion++;
                    loadQuestion();
                }, 5000);
            }
        }

        // é¡¯ç¤ºå›é¥‹è¨Šæ¯
        function showFeedback(message, type) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type} active`;
            
            setTimeout(() => {
                feedback.classList.remove('active');
            }, 2000);
        }

        // é¡¯ç¤ºçµæœ
        function showResults() {
            document.getElementById('gameArea').classList.remove('active');
            document.getElementById('resultScreen').classList.add('active');
            
            const accuracy = Math.round((correctAnswers / totalQuestions) * 100);
            
            document.getElementById('totalQuestions').textContent = totalQuestions;
            document.getElementById('finalCorrect').textContent = correctAnswers;
            document.getElementById('accuracy').textContent = accuracy + '%';
            document.getElementById('finalScore').textContent = score;
        }

        // å†ç©ä¸€æ¬¡
        function retryGame() {
            startGame(currentUnit);
        }

        // è¿”å›ä¸»é¸å–®
        function backToMenu() {
            document.getElementById('gameArea').classList.remove('active');
            document.getElementById('resultScreen').classList.remove('active');
            document.getElementById('unitSelection').style.display = 'grid';
            
            // é‡ç½®ç‹€æ…‹
            currentQuestion = 0;
            score = 0;
            correctAnswers = 0;
        }

        // é™£åˆ—éš¨æ©Ÿæ’åˆ—
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // é˜²æ­¢é é¢é—œé–‰æ™‚èªéŸ³ç¹¼çºŒ
        window.addEventListener('beforeunload', () => {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
            }
        });
    </script>
</body>
</html>